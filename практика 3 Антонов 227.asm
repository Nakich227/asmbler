; multi-segment executable file template.

data segment 
    A DB ?
    X DB ?
    Y DB ?  
    PERENOS DB 13,10,"$"
    VVOD_A DB 13,10,"VVEDITE A=$"
    VVOD_X DB 13,10,"VVEDITE X=$",13,10 
    VIVOD_Y DB "Y=$"
    ; add your data here!
    pkey db "press any key...$"
ends

stack segment
    dw   128  dup(0)
ends

code segment
START:
; ????????? ?????????? ?????????:
MOV AX, DATA ; ???????? ???????? ?????? ? AX
MOV DS, AX ; ????????? ???????? ??????
MOV ES, AX ; ????????? ??????????????? ????????
XOR AX, AX ; ????????? ???????? AX
MOV DX, OFFSET VVOD_A ; ???????? ?????? ?????? ??????????? ??? ????? A ? DX
MOV AH, 9 ; ????????? ??????? DOS ??? ?????? ??????
INT 21H ; ????? DOS ??? ?????? ??????
SLED2:
MOV AH, 1 ; ????????? ??????? DOS ??? ????? ??????? ? ??????????
INT 21H ; ????? DOS
CMP AL, "-" ; ????????, ???????? ?? ????????? ?????? ?????? ??????
JNZ SLED1 ; ???????, ???? ????????? ?????? ?? ?????
MOV BX, 1 ; ????????? ???????? ??????
JMP SLED2 ; ????????? ???? ???????
SLED1:
SUB AL, 30H ; ?????????????? ASCII ???? ????? ? ???????? ????????
TEST BX, BX ; ???????? ???????? ??????
JZ SLED3 ; ???????, ???? ??????? ?????? ?? ??????????
NEG AL ; ???????? ????? ?????

SLED3:
MOV A, AL ; ?????????? ???????? A
XOR AX, AX ; ????????? ???????? AX
XOR BX, BX ; ????????? ???????? BX
MOV DX, OFFSET VVOD_X ; ???????? ?????? ?????? ??????????? ??? ????? X ? DX
MOV AH, 9 ; ????????? ??????? DOS ??? ?????? ??????
INT 21H ; ????? DOS ??? ?????? ??????
SLED4:
MOV AH, 1 ; ????????? ??????? DOS ??? ????? ??????? ? ??????????
INT 21H ; ????? DOS
CMP AL, "-" ; ????????, ???????? ?? ????????? ?????? ?????? ??????
JNZ SLED5 ; ???????, ???? ????????? ?????? ?? ?????
MOV BX, 1 ; ????????? ???????? ??????
JMP SLED4 ; ????????? ???? ???????
SLED5:
SUB AL, 30H ; ?????????????? ASCII ???? ????? ? ???????? ????????
TEST BX, BX ; ???????? ???????? ??????
JZ SLED6 ; ???????, ???? ??????? ?????? ?? ??????????
NEG AL ; ???????? ????? ?????
SLED6:
MOV X, AL ; ?????????? ???????? X 

MOV AL, X ; ???????? ???????? A ? AL 

CMP AL, 2 ; ????????? ???????? A ? X
JGE @LEFT ; ???????, ???? A < X
MOV CL, 8
JMP @V ; ??????? ? ??????????
@LEFT:
MOV CL, X
SUB CL,2    

@V:
cmp x , 0
jz @a  
mov dl ,a 
sub dl, x
jmp @VIXOD
@a: 
mov dl,4

@VIXOD:
mov al,cl
sub al,dl
MOV Y, AL ; ?????????? ?????????? ? Y
MOV DX, OFFSET PERENOS ; ???????? ?????? ?????? ???????? ?????? ? DX
MOV AH, 9 ; ????????? ??????? DOS ??? ?????? ??????
INT 21H ; ????? DOS ??? ?????? ??????
MOV DX, OFFSET VIVOD_Y ; ???????? ?????? ?????? "Y=" ? DX
MOV AH, 9 ; ????????? ??????? DOS ??? ?????? ??????
INT 21H ; ????? DOS ??? ?????? ??????
MOV AL, Y ; ???????? ???????? Y ? AL
CMP Y, 0 ; ???????? ????? Y
JGE SLED7 ; ???????, ???? Y >= 0
NEG AL ; ???????? ?????, ???? Y < 0
MOV BL, AL ; ?????????? ?????????????? ???????? ? BL
MOV DL, "-" ; ???????? ????? ?????? ? DL
MOV AH, 2 ; ????????? ??????? DOS ??? ?????? ???????
INT 21H ; ????? DOS ??? ?????? ???????
MOV DL, BL ; ???????? ?????????????? ???????? ? DL
ADD DL, 30H ; ?????????????? ???????? ? ASCII ???
INT 21H ; ????? DOS ??? ?????? ???????
JMP SLED8 ; ??????? ? ??????????
SLED7:
MOV DL, Y ; ???????? ???????? Y ? DL
ADD DL, 30H ; ?????????????? ???????? ? ASCII ???
MOV AH, 2 ; ????????? ??????? DOS ??? ?????? ???????
INT 21H ; ????? DOS ??? ?????? ???????
SLED8:
MOV DX, OFFSET PERENOS ; ???????? ?????? ?????? ???????? ?????? ? DX
MOV AH, 9 ; ????????? ??????? DOS ??? ?????? ??????
INT 21H ; ????? DOS ??? ?????? ??????

MOV AH, 1 ; ????????? ??????? DOS ??? ???????? ??????? ???????
INT 21H ; ????? DOS ??? ???????? ??????? ???????
MOV AX, 4C00H ; ????????? ??????? DOS ??? ?????? ?? ?????????
INT 21H ; ????? DOS ??? ?????????? ?????????
ENDS

end start ; set entry point and stop the assembler.
